<?php

declare(strict_types=1);

namespace Mammatus\Queue\Generated\Consumer;

use Mammatus\Groups\Attributes\Group;
use Mammatus\Groups\Contracts\LifeCycleHandler;
use Mammatus\Groups\Type;
use Mammatus\Queue\Consumer;
use Mammatus\Queue\Generated\WorkerFactory;
use Psr\Log\LoggerInterface;
use React\Promise\PromiseInterface;

/**
 * This class is generated by mammatus/queue, do not edit manually.
 * Or do, I'm not your parent, they will be overwritten next composer install/update ¯\_(ツ)_/¯.
 */
#[Group(Type::Normal, 'queue-worker-noop-1f7ac9a5eef00cd465efed97b117a820')]
final class MammatusDevAppQueueOHellNoViaProostForNoopWithMammatusDevAppQueueBeerMessage implements LifeCycleHandler
{
    private PromiseInterface|null $promise = null;

    public function __construct(
        private readonly Consumer $consumer,
        private readonly LoggerInterface $logger,
    ) {
    }

    public static function group(): string
    {
        return 'queue-worker-noop-1f7ac9a5eef00cd465efed97b117a820';
    }

    public function start(): void
    {
//        $this->logger->debug('Starting consumer: {serverName}', ['serverName' => self::NAME]);
        $this->promise = $this->consumer->setupConsumer(WorkerFactory\MammatusDevAppQueueOHellNoViaProostForNoopWithMammatusDevAppQueueBeerMessage::create());
//        $this->logger->debug('Started server: {serverName}', ['serverName' => self::NAME]);
    }

    public function stop(): void
    {
//        $this->logger->debug('Stopping server: {serverName}', ['serverName' => self::NAME]);
        $this->promise?->cancel();
//        $this->logger->debug('Stopped server: {serverName}', ['serverName' => self::NAME]);
    }
}
